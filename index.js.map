{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport axios from 'axios';\n\nlet lightbox; \n\nexport function addLoader(gallery) {\n  const loaderHTML = '<span class=\"loader\"></span>';\n  gallery.insertAdjacentHTML('afterbegin', loaderHTML);\n}\n\nexport function hideLoading() {\n  const loader = document.querySelector('.loader');\n  if (loader) {\n    loader.remove();\n  }\n}\n\nexport function renderGallery(images) {\n  const galleryContainer = document.querySelector('.gallery');\n  const markup = images.map (image =>`\n      <a href=\"${image.largeImageURL}\" class=\"gallery-link\">\n        <img class=\"img-gallery\"\n          src=\"${image.webformatURL}\"\n          alt=\"${image.tags}\" \n          loading=\"lazy\" />\n        <ul class=\"list-wrapper\">\n          <li class=\"text-content\"><b>Likes:</b> ${image.likes}</li>\n          <li class=\"text-content\"><b>Views:</b> ${image.views}</li>\n          <li class=\"text-content\"><b>Comments:</b> ${image.comments}</li>\n          <li class=\"text-content\"><b>Downloads:</b> ${image.downloads}</li>\n        </ul>\n      </a>\n  `).join('');\n  galleryContainer.innerHTML = markup;\n\n  if (lightbox) {\n    lightbox.refresh();\n  } else {\n    lightbox = new SimpleLightbox('.gallery a', {\n      captionsData: 'alt',\n      captionDelay: 250,\n      captionPosition: 'bottom',\n    });\n  }\n}\n\nexport function scrollBar() {\n  const galleryItem = document.querySelector('.gallery a');\n  if (galleryItem) {\n    const { height: cardHeight } = galleryItem.getBoundingClientRect();\n    const listWrapper = document.querySelector('.list-wrapper');\n    const { height: listHeight } = listWrapper.getBoundingClientRect();\n\n    const totalHeight = cardHeight + listHeight;\n\n    window.scrollBy({\n      top: totalHeight * 4, \n      behavior: 'smooth',\n    });\n  }\n} //Додаємо плавне прокручування\n\nexport function clearGallery() {\n  const galleryContainer = document.querySelector('.gallery');\n  galleryContainer.innerHTML = '';\n}\n\nexport function showInfo(message) {\n  iziToast.info({\n    title: `Info`,\n    message: message,\n    position: \"topRight\",\n    backgroundColor: \"red\",\n    messageColor: \"white\",\n    titleColor: \"white\",\n  });\n}","import axios from 'axios';\nconst keyApi = '45922188-6c9bdbb7442dfc44aff321ea7';\nconst url = \"https://pixabay.com/api/\";\n\nexport async function getGallery(query, page = 1, perPage = 15) {\n  const searchParams = new URLSearchParams({\n    key: keyApi,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    page,\n    per_page: perPage,\n  });\n\n  const fullUrl = `${url}?${searchParams.toString()}`;\n\n  try {\n    const response = await axios.get(fullUrl);\n      console.log('Total Hits:', response.data.totalHits); \n      console.log('Current Page Results:', response.data.hits); // Перевірка кількості результатів\n    return response.data;\n  } catch (error) {\n    console.error('There was an error with the fetch operation:', error);\n    throw error;\n  }\n}","import { addLoader, clearGallery, hideLoading, renderGallery, showInfo, scrollBar } from './js/render-functions.js';\nimport { getGallery } from './js/pixabay-api.js';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport axios from 'axios';\n\nconst form = document.querySelector('.search-form');\nconst input = document.querySelector('[name=\"searchQuery\"]');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nlet query = '';\nlet page = 1;\nlet totalHits = 0;\nlet perPage = 15;\n\nloadMoreBtn.style.display = 'none';\n\nform.addEventListener(\"submit\", async (event) => {\nevent.preventDefault();\n\nquery = input.value.trim();\nif (!query) {\n    iziToast.error({\n        title: `Error`,\n        message: `Please enter a search query.`,\n        position: 'topRight',\n    });\n    return;\n}\n\n    clearGallery();\n    loadMoreBtn.style.display = 'none';\n    addLoader(gallery);\n\n  page = 1; // Оновлюємо сторінку при новому запиті\n\ntry {\n    const data = await getGallery(query, page, perPage);\n    hideLoading();\n\n    totalHits = data.totalHits;\n\n    if (!data || data.hits.length === 0) {\n        showInfo('Sorry, there are no images matching your search query. Please try again!');\n        return;\n    }\n\n    renderGallery(data.hits);\n\n    if (data.hits.length >= perPage && (page * perPage) < totalHits) {\nloadMoreBtn.style.display = 'block'; \n    }\n\n} catch (error) {\n    console.error('Error fetching images:', error);\n    iziToast.error({\n        title: 'Error',\n        message: `Error: ${error.message}`,\n        position: 'topRight',\n    });\n} finally {\n    hideLoading();\n}\n});\n\nloadMoreBtn.addEventListener(\"click\", async () => {\n  // Перевіряємо, чи вже досягли кінця результатів\n  if ((page * perPage) >= totalHits) {\n    iziToast.error({\n        position: 'topRight',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: \"topRight\",\n        backgroundColor: \"red\",\n        messageColor: \"white\",\n        titleColor: \"white\",\n    });\n    loadMoreBtn.style.display = 'none';\n    return;\n}\n\n  page += 1; // Збільшуємо номер сторінки для наступного запиту\naddLoader(gallery);\n\ntry {\n    const data = await getGallery(query, page, perPage);\n    hideLoading();\n\n    // Перевіряємо, чи є результати на поточній сторінці\nif (!data || data.hits.length === 0) {\n    showInfo('No more images found.');\n      loadMoreBtn.style.display = 'none'; // Ховаємо кнопку, якщо немає більше зображень\n    return;\n    }\n\n    renderGallery(data.hits); // Додаємо нові зображення до галереї\n\n    scrollBar();\n\n    // Якщо показано всі результати, ховаємо кнопку\n    if ((page * perPage) >= totalHits) {\n    loadMoreBtn.style.display = 'none';\n    iziToast.error({\n        position: 'topRight',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        backgroundColor: \"red\",\n        messageColor: \"white\",\n        titleColor: \"white\",\n});\n    }\n\n} catch (error) {\n    console.error('Error fetching images:', error);\n    iziToast.error({\n        title: 'Error',\n        message: `Error: ${error.message}`,\n        position: 'topRight',\n    });\n} finally {\n    hideLoading();\n}\n});"],"names":["lightbox","addLoader","gallery","hideLoading","loader","renderGallery","images","galleryContainer","markup","image","SimpleLightbox","scrollBar","galleryItem","cardHeight","listWrapper","listHeight","totalHeight","clearGallery","showInfo","message","iziToast","keyApi","url","getGallery","query","page","perPage","searchParams","fullUrl","response","axios","error","form","input","loadMoreBtn","totalHits","event","data"],"mappings":"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"}